{"version":3,"sources":["../../node_modules/uid/dist/index.mjs","../../src/index.js","App.js","index.js"],"names":["BUFFER","IDX","HEX","toString","substring","INIT_FLAGS","MultiBusyContext","createContext","multiBusyReducer","busyFlags","flagId","fid","useMultiBusy","useContext","dispatch","useState","isBusy","useEffect","setBusyFlagId","len","i","tmp","SIZE","Math","random","uid","busyFlagId","startBusy","type","endBusy","checkIsBusy","adHocId","MultiBusyProvider","children","useReducer","value","someService","a","Promise","resolve","setTimeout","goFetchSomething","result","useComponentStyles","makeStyles","theme","progress","color","palette","grey","marginLeft","spacing","SomeComponent","classes","Button","variant","disabled","onClick","CircularProgress","size","className","SomeOtherComponent","useLinkStyles","YetAnotherComponent","Link","href","useAppStyles","root","marginBottom","App","Box","display","flexDirection","alignItems","justifyContent","height","ReactDOM","render","CssBaseline","document","getElementById"],"mappings":"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","file":"static/js/main.128a8143.chunk.js","sourcesContent":["var IDX=256, HEX=[], SIZE=256, BUFFER;\nwhile (IDX--) HEX[IDX] = (IDX + 256).toString(16).substring(1);\n\nexport function uid(len) {\n\tvar i=0, tmp=(len || 11);\n\tif (!BUFFER || ((IDX + tmp) > SIZE*2)) {\n\t\tfor (BUFFER='',IDX=0; i < SIZE; i++) {\n\t\t\tBUFFER += HEX[Math.random() * 256 | 0];\n\t\t}\n\t}\n\n\treturn BUFFER.substring(IDX, IDX++ + tmp);\n}\n","import React, { createContext, useContext, useEffect, useReducer, useState } from 'react'\nimport { uid } from 'uid'\n\nconst INIT_FLAGS = []\nconst MultiBusyContext = createContext([...INIT_FLAGS])\n\nexport const BUSY_FLAGS_ADD = 'BUSY_FLAGS_ADD'\nexport const BUSY_FLAGS_REMOVE = 'BUSY_FLAGS_REMOVE'\nexport const BUSY_FLAGS_RESET = 'BUSY_FLAGS_RESET'\n\nconst multiBusyReducer = (busyFlags, {type, flagId}) => {\n  switch (type) {\n    case BUSY_FLAGS_ADD:\n      return [\n        ...busyFlags,\n        flagId\n      ]\n    case BUSY_FLAGS_REMOVE:\n      return busyFlags.filter(fid => fid !== flagId)\n    case BUSY_FLAGS_RESET:\n      return [...INIT_FLAGS]\n    default:\n      return busyFlags\n  }\n}\n\nexport const useMultiBusy = () => {\n  const { busyFlags, dispatch } = useContext(MultiBusyContext)\n  const [busyFlagId, setBusyFlagId] = useState(null)\n  const isBusy = busyFlags.includes(busyFlagId)\n\n  useEffect(() => setBusyFlagId(uid()), [])\n  useEffect(() => () => setBusyFlagId(null), [])\n\n  return {\n    busyFlagId,\n    busyFlags,\n    startBusy: () => dispatch({ type: BUSY_FLAGS_ADD, flagId: busyFlagId}),\n    endBusy: () => dispatch({ type: BUSY_FLAGS_REMOVE, flagId: busyFlagId}),\n    checkIsBusy: (adHocId) => busyFlags.includes(adHocId || busyFlagId),\n    isBusy\n  }\n}\n\nexport const MultiBusyProvider = ({children}) => {\n  const [busyFlags, dispatch] = useReducer(multiBusyReducer, INIT_FLAGS)\n  return <MultiBusyContext.Provider {...{\n    value: {busyFlags, dispatch}\n  }}>{children}</MultiBusyContext.Provider>\n}\n\nexport default MultiBusyContext\n","import React from 'react'\nimport { Box, Button, CircularProgress, Link, makeStyles } from '@material-ui/core'\nimport { useMultiBusy } from 'react-multi-busy'\n\nconst someService = async () => await new Promise(\n  resolve => {\n    setTimeout(() => {\n      resolve('DONE')\n    }, 1000)\n  }\n)\n\n// This could easily be an action-thunk\nconst goFetchSomething = (startBusy, endBusy) => async () => {\n  startBusy()\n  const result = await someService()\n  endBusy()\n  return result\n}\n\nconst useComponentStyles = makeStyles(theme => ({\n  progress: {\n    color: theme.palette.grey[500],\n    marginLeft: theme.spacing(1)\n  }\n}))\nconst SomeComponent = () => {\n  const classes = useComponentStyles()\n  const {isBusy, startBusy, endBusy} = useMultiBusy()\n  return <Button {...{\n    color: 'primary',\n    variant: 'contained',\n    disabled: isBusy,\n    onClick: goFetchSomething(startBusy, endBusy)\n  }} >\n    <span>{\n      `${ isBusy ? 'I\\'m busy' : 'Click Me' }`\n    }</span>\n    { isBusy && <CircularProgress {...{\n      size: '1em',\n      className: classes.progress\n    }} /> }\n  </Button>\n}\n\nconst SomeOtherComponent = () => {\n  const classes = useComponentStyles()\n  const {isBusy, startBusy, endBusy} = useMultiBusy()\n  return <Button {...{\n    color: 'primary',\n    variant: 'contained',\n    disabled: isBusy,\n    onClick: goFetchSomething(startBusy, endBusy)\n  }} >\n    <span>{\n      `${ isBusy ? 'I\\'m busy' : 'Click Me' }`\n    }</span>\n    { isBusy && <CircularProgress {...{\n      size: '1em',\n      className: classes.progress\n    }} /> }\n  </Button>\n}\n\nconst useLinkStyles = makeStyles(theme => ({\n  progress: {\n    marginLeft: theme.spacing(1)\n  }\n}))\n\nconst YetAnotherComponent = () => {\n  const classes = useLinkStyles()\n  const {isBusy, startBusy, endBusy} = useMultiBusy()\n  return <Link {...{\n    href: '#',\n    disabled: isBusy,\n    onClick:goFetchSomething(startBusy, endBusy)\n  }}>\n    <span>{\n    `${isBusy ? 'I\\'m Busy' : 'Click Me'}`\n    }</span>\n    { isBusy && <CircularProgress {...{\n      size: '1em',\n      className: classes.progress\n    }} /> }\n  </Link>\n}\n\nconst useAppStyles = makeStyles(theme => ({\n  root:{\n    '& button': {\n      marginBottom: theme.spacing(1),\n    },\n  }\n}))\nconst App = () => {\n  const classes = useAppStyles()\n  return <Box {...{\n    className: classes.root,\n    display:'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    justifyContent: 'center',\n    height: '100vh'\n  }}>\n    <SomeComponent />\n    <SomeOtherComponent />\n    <YetAnotherComponent />\n  </Box>\n}\n\nexport default App\n","import './index.css'\n\nimport React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\nimport { MultiBusyProvider } from 'react-multi-busy'\nimport { CssBaseline } from '@material-ui/core'\n\nReactDOM.render(\n  <CssBaseline>\n    <MultiBusyProvider>\n      <App />\n    </MultiBusyProvider>\n  </CssBaseline>,\n  document.getElementById('root')\n)\n"],"sourceRoot":""}