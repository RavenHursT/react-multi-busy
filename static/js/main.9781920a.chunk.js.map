{"version":3,"sources":["../../src/index.js","App.js","index.js"],"names":["INIT_FLAGS","MultiBusyContext","createContext","multiBusyReducer","busyFlags","type","flagId","fid","useMultiBusy","useContext","dispatch","useState","busyFlagId","setBusyFlagId","isBusy","useEffect","uid","startBusy","endBusy","checkIsBusy","adHocId","MultiBusyProvider","children","useReducer","value","someService","a","Promise","resolve","setTimeout","goFetchSomething","result","useComponentStyles","makeStyles","theme","progress","color","palette","grey","marginLeft","spacing","SomeComponent","classes","Button","variant","disabled","onClick","CircularProgress","size","className","SomeOtherComponent","useLinkStyles","YetAnotherComponent","Link","href","useAppStyles","root","marginBottom","App","Box","display","flexDirection","alignItems","justifyContent","height","ReactDOM","render","CssBaseline","document","getElementById"],"mappings":"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","file":"static/js/main.9781920a.chunk.js","sourcesContent":["import React, { createContext, useContext, useEffect, useReducer, useState } from 'react'\nimport { uid } from 'uid'\n\nconst INIT_FLAGS = []\nconst MultiBusyContext = createContext([...INIT_FLAGS])\n\nexport const BUSY_FLAGS_ADD = 'BUSY_FLAGS_ADD'\nexport const BUSY_FLAGS_REMOVE = 'BUSY_FLAGS_REMOVE'\nexport const BUSY_FLAGS_RESET = 'BUSY_FLAGS_RESET'\n\nconst multiBusyReducer = (busyFlags, {type, flagId}) => {\n  switch (type) {\n    case BUSY_FLAGS_ADD:\n      return [\n        ...busyFlags,\n        flagId\n      ]\n    case BUSY_FLAGS_REMOVE:\n      return busyFlags.filter(fid => fid !== flagId)\n    case BUSY_FLAGS_RESET:\n      return [...INIT_FLAGS]\n    default:\n      return busyFlags\n  }\n}\n\nexport const useMultiBusy = () => {\n  const { busyFlags, dispatch } = useContext(MultiBusyContext)\n  const [busyFlagId, setBusyFlagId] = useState(null)\n  const isBusy = busyFlags.includes(busyFlagId)\n\n  useEffect(() => setBusyFlagId(uid()), [])\n  useEffect(() => () => setBusyFlagId(null), [])\n\n  return {\n    busyFlagId,\n    busyFlags,\n    startBusy: () => dispatch({ type: BUSY_FLAGS_ADD, flagId: busyFlagId}),\n    endBusy: () => dispatch({ type: BUSY_FLAGS_REMOVE, flagId: busyFlagId}),\n    checkIsBusy: (adHocId) => busyFlags.includes(adHocId || busyFlagId),\n    isBusy\n  }\n}\n\nexport const MultiBusyProvider = ({children}) => {\n  const [busyFlags, dispatch] = useReducer(multiBusyReducer, INIT_FLAGS)\n  return <MultiBusyContext.Provider {...{\n    value: {busyFlags, dispatch}\n  }}>{children}</MultiBusyContext.Provider>\n}\n\nexport default MultiBusyContext\n","import React from 'react'\nimport { Box, Button, CircularProgress, Link, makeStyles } from '@material-ui/core'\nimport { useMultiBusy } from 'react-multi-busy'\n\nconst someService = async () => await new Promise(\n  resolve => {\n    setTimeout(() => {\n      resolve('DONE')\n    }, 1000)\n  }\n)\n\n// This could easily be an action-thunk\nconst goFetchSomething = (startBusy, endBusy) => async () => {\n  startBusy()\n  const result = await someService()\n  endBusy()\n  return result\n}\n\nconst useComponentStyles = makeStyles(theme => ({\n  progress: {\n    color: theme.palette.grey[500],\n    marginLeft: theme.spacing(1)\n  }\n}))\nconst SomeComponent = () => {\n  const classes = useComponentStyles()\n  const {isBusy, startBusy, endBusy} = useMultiBusy()\n  return <Button {...{\n    color: 'primary',\n    variant: 'contained',\n    disabled: isBusy,\n    onClick: goFetchSomething(startBusy, endBusy)\n  }} >\n    <span>{\n      `${ isBusy ? 'I\\'m busy' : 'Click Me' }`\n    }</span>\n    { isBusy && <CircularProgress {...{\n      size: '1em',\n      className: classes.progress\n    }} /> }\n  </Button>\n}\n\nconst SomeOtherComponent = () => {\n  const classes = useComponentStyles()\n  const {isBusy, startBusy, endBusy} = useMultiBusy()\n  return <Button {...{\n    color: 'primary',\n    variant: 'contained',\n    disabled: isBusy,\n    onClick: goFetchSomething(startBusy, endBusy)\n  }} >\n    <span>{\n      `${ isBusy ? 'I\\'m busy' : 'Click Me' }`\n    }</span>\n    { isBusy && <CircularProgress {...{\n      size: '1em',\n      className: classes.progress\n    }} /> }\n  </Button>\n}\n\nconst useLinkStyles = makeStyles(theme => ({\n  progress: {\n    marginLeft: theme.spacing(1)\n  }\n}))\n\nconst YetAnotherComponent = () => {\n  const classes = useLinkStyles()\n  const {isBusy, startBusy, endBusy} = useMultiBusy()\n  return <Link {...{\n    href: '#',\n    disabled: isBusy,\n    onClick:goFetchSomething(startBusy, endBusy)\n  }}>\n    <span>{\n    `${isBusy ? 'I\\'m Busy' : 'Click Me'}`\n    }</span>\n    { isBusy && <CircularProgress {...{\n      size: '1em',\n      className: classes.progress\n    }} /> }\n  </Link>\n}\n\nconst useAppStyles = makeStyles(theme => ({\n  root:{\n    '& button': {\n      marginBottom: theme.spacing(1),\n    },\n  }\n}))\nconst App = () => {\n  const classes = useAppStyles()\n  return <Box {...{\n    className: classes.root,\n    display:'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    justifyContent: 'center',\n    height: '100vh'\n  }}>\n    <SomeComponent />\n    <SomeOtherComponent />\n    <YetAnotherComponent />\n  </Box>\n}\n\nexport default App\n","import './index.css'\n\nimport React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\nimport { MultiBusyProvider } from 'react-multi-busy'\nimport { CssBaseline } from '@material-ui/core'\n\nReactDOM.render(\n  <CssBaseline>\n    <MultiBusyProvider>\n      <App />\n    </MultiBusyProvider>\n  </CssBaseline>,\n  document.getElementById('root')\n)\n"],"sourceRoot":""}